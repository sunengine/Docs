(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{224:function(t,s,a){"use strict";a.r(s);var n=a(28),_=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"установка-на-сервер"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#установка-на-сервер"}},[t._v("#")]),t._v(" Установка на сервер")]),t._v(" "),a("p",[t._v('Все ".sh" скрипты находятся в директории "Scripts/".')]),t._v(" "),a("h3",{attrs:{id:"дnя-пубnикации-на-сервере-необходимо-выпоnнить-сnедующие-действия"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#дnя-пубnикации-на-сервере-необходимо-выпоnнить-сnедующие-действия"}},[t._v("#")]),t._v(" Для публикации на сервере необходимо выполнить следующие действия:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('Запустить скрипт "build.sh".\nПодготовить параметры скрипта "publish.sh" переименовав "PUBLISH.template" в "PUBLISH" отредактировать настройки внутри.\nЗапустить скрипт "publish.sh".\n')])])]),a("h3",{attrs:{id:"создание-сборки"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#создание-сборки"}},[t._v("#")]),t._v(" Создание сборки")]),t._v(" "),a("h4",{attrs:{id:"скрипт-build-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#скрипт-build-sh"}},[t._v("#")]),t._v(" Скрипт: build.sh")]),t._v(" "),a("p",[t._v('Скрипт работает из коробки.\nПосле запуска весь проект собирается в директорию  "build".\nКлиентская часть кладётся в  "build/wwwroot".\nДля настройки по умолчанию используется файл "BUILD", либо укажите файл с настройками первым аргументом.\n"build.sh /path/to/BUILD_VARS"')]),t._v(" "),a("h3",{attrs:{id:"настройки-скрипта-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#настройки-скрипта-build"}},[t._v("#")]),t._v(" Настройки скрипта: BUILD")]),t._v(" "),a("p",[t._v('PROJECT_NAME="SunEngine" - Имя проекта, используется для вывода в консоли\nPROJECT_ROOT="auto"      - Путь к корневой папке проекта.\nЗначение "auto": текущая папка или папка выше определяется содержанием в папке файла .SunEngineRoot.'),a("br"),t._v('\nSERVER_PATH="${PROJECT_ROOT}/Server" - Путь к серверной части проекта (DotNet solution)\nCLIENT_PATH="${PROJECT_ROOT}/Client" - Путь к клиентской части проекта (Quasar project)\nCONFIG_PATH="${PROJECT_ROOT}/Config" - Путь к папке с конфигурацией проекта\nBUILD_PATH="${PROJECT_ROOT}/build"   - Путь куда будет помещена результирующая сборка проекта\nNPM_UTIL="yarn"                      - Установщик npm пакетов (yarn или npm)')]),t._v(" "),a("h3",{attrs:{id:"установка-на-сервер-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#установка-на-сервер-2"}},[t._v("#")]),t._v(" Установка на сервер")]),t._v(" "),a("h4",{attrs:{id:"скрипт-publish-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#скрипт-publish-sh"}},[t._v("#")]),t._v(" Скрипт: publish.sh")]),t._v(" "),a("p",[t._v('Перед запуском необходимо отредактировать параметры в "PUBLISH" файле настроек скрипта.')]),t._v(" "),a("p",[t._v('Скрипт "publish.sh" записывает директорию "build" на сервер, перезаписывая все файлы, а директорию "Config" записывает только если её ещё нет на сервере.')]),t._v(" "),a("p",[t._v('Для настройки по умолчанию используется файл "PUBLISH", либо укажите файл с настройками первым аргументом.')]),t._v(" "),a("p",[t._v('"publish.sh /path/to/PUBLISH_VARS"')]),t._v(" "),a("p",[t._v('Для того что бы скрипт смог полностью отработать пользователю "username" на сервере (под которым работает скрипт)  надо добавить в группы "www-data", "systemd-journal", "systemd-network", "systemd-network", "systemd-resolve". Это можно сделать отредактировав файл "/etc/group".')]),t._v(" "),a("h3",{attrs:{id:"настройки-скрипта-publish"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#настройки-скрипта-publish"}},[t._v("#")]),t._v(" Настройки скрипта: PUBLISH")]),t._v(" "),a("p",[t._v('PROJECT_NAME="SunEngine Demo"           - Имя проекта, используется для вывода в консоли\nLOCAL_BUILD_PATH="/path/to/local/build" - Путь к папке build проекта, должен соответствовать BUILD_PATH из файла BUILD\nREMOTE_USER="username"                  - Имя пользователя под которым будет производиться коннект к серверу\nREMOTE_HOST="111.111.111.111"           - IP или домен хоста сервера\nREMOTE_DIRECTORY="/remote/dir/path"     - Путь папки на сервере куда будет осуществляться загрузка\nREMOTE_DIRECTORY_OWNER="www-data"       - Пользователь на сервере которому принадлежит папка REMOTE_DIRECTORY\nREMOTE_DIRECTORY_GROUP="www-data"       - Группа на сервере которой принадлежит папка REMOTE_DIRECTORY\nREMOTE_SYSTEMD_SERVICE_NAME="demo.sunengine.site"  - Имя сервиса systemd для перезапуска после загрузки')]),t._v(" "),a("h3",{attrs:{id:"запись-файnов-конфигурации"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#запись-файnов-конфигурации"}},[t._v("#")]),t._v(" Запись файлов конфигурации")]),t._v(" "),a("p",[t._v('После построение "build.sh" и публикации "publish.sh", необходимо настроить конфигурацию на сервере отредактировать файлы в директории "Config" на сервере, это делается один раз.\nНеобходимо прописать правильные настройки базы данных в "DataBaseConnection.json"\nОстальные настройки - по необходимости.\nДиректория "Config/Init" служит для стартовой инициализации базы данных сайта - команда "dotnet SunEngine.dll init migrate".\nОбновление SunEngine на сервере до последней версии с репозитория GitHub.\nСкрипт: update.sh\nСкрипт работает из коробки при условии настроенного publish.sh скрипта.\nСкрипт берёт последнюю версию из мастер ветки репозитория\n"git pull origin master"\nИ последовательно запускает.\n"build.sh" и\n"publish.sh" скрипты.')]),t._v(" "),a("h3",{attrs:{id:"настройки-скрипта-update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#настройки-скрипта-update"}},[t._v("#")]),t._v(" Настройки скрипта: UPDATE")]),t._v(" "),a("p",[t._v('PROJECT_NAME="SunEngine Demo"   - Имя проекта, используется для вывода в консоли\nPROJECT_ROOT="auto"             - Путь к корневой папке проекта.\nЗначение "auto": текущая папка или папка выше определяется содержанием в папке файла .SunEngineRoot.'),a("br"),t._v('\nBUILD_SCRIPT_PATH="./build.sh"      - Путь к скрипту сборки\nPUBLISH_SCRIPT_PATH="./publish.sh"  - Путь к скрипту публикации')]),t._v(" "),a("h3",{attrs:{id:"метки"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#метки"}},[t._v("#")]),t._v(" Метки:")]),t._v(" "),a("p",[t._v("publish")]),t._v(" "),a("p",[t._v("server")]),t._v(" "),a("p",[t._v("публикация")]),t._v(" "),a("p",[t._v("сервер")])])}),[],!1,null,null,null);s.default=_.exports}}]);